+++
title = "Как я настроил свой домашний сервер вне дома"
date = "2025-02-22"
draft = true

[taxonomies]
tags = ["Болтология", "Selfhosting"]

[extra]
comment = true
toc = true
og_image = true
+++

Некоторое время назад я начал интересоваться темой self-hosted, домашними лабораториями и всем таким. Вообще, обычно для этого используется железка прямо в доме, но я прикинул и понял, что мне не слишком хочется настраивать свою сеть так, чтобы в неё можно было попасть снаружи. В общем, несколько пожертвовав безопасностью, я развернул виртуальный сервер у одного хостера и расскажу, что и как там поднял.

<!--more-->

# Развёртывание

Большая часть софта для self-hosted доступна в качестве одного или связки нескольких Docker-контейнеров. Обычно авторы софта предлагают готовые `docker-compose.yml`, которыми я и буду пользоваться. В корень папки с подпапками приложений я положил маленький скрипт, который автоматически стартует все контейнеры:

```bash
#!/bin/bash

for d in */; do (cd "$d" && docker compose up -d); done
```

# Настройка Nginx

Чтобы упростить обратное проксирование до приложений я использую Nginx Proxy Manager -- софт с веб-интерфейсом, который автоматически настраивает Nginx и работает с SSL-сертификатами.

{{ resize_image(path="posts/self-hosted/npm.jpg", width=1258, height=802, op="scale") }}

# Главная страница

Самое первое -- страница, которая позволяет запустить другие приложения. Их много разных вариантов, но я остановился на Homarr по нескольким причинам: Красивая тема по умолчанию, поддержка учётных записей и настройка без файлов, всё делается прямо в интерфейсе

{{ resize_image(path="posts/self-hosted/homarr.png", width=1916, height=891, op="scale") }}

# Галерея

Свою коллекцию фотографий я тоже выгрузил на этот сервер. Ими управляет Immich, который может показывать фото/видео на таймлайне, на карте, даёт свою локальную нейросеть, выделяющую лица на фото/видео (как ни странно, намного лучше и точнее, чем Google Фото, разве что иногда определяет одно и то же лицо как разные, но такие штуки можно объединить вручную)

{{ resize_image(path="posts/self-hosted/immich.png", width=1842, height=914, op="scale") }}

# Менеджер паролей

Как никогда не терять пароли? Бумажка? Избранное в телеге? Каких только решений я не видел, но сам уже довольно давно пользуюсь Bitwarden, по большей части OSS менеджером. Да, кого-то коммерческий софт может оттолкнуть, но меня за много лет он ни разу не подводил.

Раньше я пользовался бесплатной облачной версией, когда захотел начать за неё платить, иностранные сервисы уже отказались принимать русские деньги и тогда я занялся селфхостингом. Пересоздавая свой прошлый сервер, снова настроил Valutwarden, который полностью копирует оригинальный API Bitwarden, но работает быстрее и полностью бесплатно (даже 2FA, за который в оригинальном софте надо платить)

{{ resize_image(path="posts/self-hosted/vaultwarden.png", width=1893, height=920, op="scale") }}

# Закладки

Периодически я нахожу разные статьи, которые хочу прочитать, но время, чтобы сделать это сразу есть не всегда. Поэтому приходится куда-то их откладывать. Какое-то время я пользовался списком для чтения в Google Chrome, но потом отказался от него и перебрался на Brave. Кажется, это решение я искал дольше остальных, ведь мне нужно было, чтобы оно работало на своём сервере, имело расширения для браузеров и мобильное приложение

{{ resize_image(path="posts/self-hosted/hoarder.png", width=1900, height=909, op="scale") }}

