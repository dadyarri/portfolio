---
import { Icon } from "astro-icon/components";
import { formatDate } from "@utils/date";
import { getWordDeclension } from "@utils/declension";
import type { CollectionEntry, RenderedContent } from "astro:content";

type Props = {
    post: CollectionEntry<"posts">;
};

type ModifiedFrontmatter = {
    readingTime: number;
};

const { post } = Astro.props;
const path = `/${post.collection}/${post.id}`;

const rendered = post.rendered as RenderedContent;
const readingTime = (rendered.metadata?.frontmatter as ModifiedFrontmatter)
    .readingTime;
---

<div class="card-info">
    <div class="tags">
        <div class="tag tag-icon">
            <Icon name="fa6-solid:calendar-days" />
        </div>
        <date>{formatDate(post.data.date)}</date>
    </div>
    <div class="tags">
        <div class="tag tag-icon">
            <Icon name="fa6-solid:clock" />
        </div>
        <span
            >{
                getWordDeclension(readingTime, [
                    "минута",
                    "минуты",
                    "минут",
                ])
            }</span
        >
    </div>
    <div class="tags">
        <div class="tag tag-icon">
            <Icon name="fa6-solid:tags" />
        </div>
        {post.data.tags.map((tag) => <div class="tag">{tag}</div>)}
    </div>
</div>